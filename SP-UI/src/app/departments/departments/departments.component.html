<div class="container">
  <app-authorized [role]="'admin'">
    <ng-container authorized>
      <h3 class="mb-4">Departments</h3>

      <app-authorized [role]="'admin'">
        <ng-container authorized>
          <a class="btn btn-primary" routerLink="/departments/create">Create Department</a>
        </ng-container>
      </app-authorized>

      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Department</th>

            <th scope="col">
              <app-authorized [role]="'admin'">
                <ng-container authorized>
                  Actions
                </ng-container>
              </app-authorized>
            </th>

          </tr>
        </thead>
        <tbody>

          <tr *ngFor="let department of departments; let i = index">
            <td scope="row">{{i + 1}}</td>
            <td>{{department.name}}</td>

            <td>
              <app-authorized [role]="'admin'">
                <ng-container authorized>
                  <div class="actions">
                    <a class="btn btn-primary" routerLink="/departments/edit/{{department.id}}">Edit</a>
                    <a class="btn btn-danger" [swal]="{title: 'Please confirm', 
                      text: 'Are you sure you want to delete this Department?', showCancelButton: true}"
                      (confirm)="delete(department.id)">Delete</a>
                  </div>
                </ng-container>
              </app-authorized>
            </td>

          </tr>

        </tbody>
      </table>

      <a class="btn btn-dark" routerLink="/management-dashboard">Return</a>

      <div class="loading">
        <div class="spinner-grow" role="status" *ngIf="departments.length <= 0"></div>
      </div>
    </ng-container>
  </app-authorized>
</div>